var app=function(){"use strict";function t(){}function n(t,n){for(const e in n)t[e]=n[e];return t}function e(t){return t()}function c(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(t,n,e){t.$$.on_destroy.push(function(t,n){const e=t.subscribe(n);return e.unsubscribe?()=>e.unsubscribe():e}(n,e))}function u(t,e,c){return t[1]?n({},n(e.$$scope.ctx,t[1](c?c(e):{}))):e.$$scope.ctx}function a(t,n,e=n){return t.set(e),n}function i(t,n){t.appendChild(n)}function f(t,n,e){t.insertBefore(n,e||null)}function $(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function g(){return p(" ")}function m(){return p("")}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function b(t,n){n=""+n,t.data!==n&&(t.data=n)}function v(t,n){(null!=n||t.value)&&(t.value=n)}let x;function y(t){x=t}function _(){if(!x)throw new Error("Function called outside component initialization");return x}function w(t){_().$$.on_mount.push(t)}function E(){const t=_();return(n,e)=>{const c=t.$$.callbacks[n];if(c){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);c.slice().forEach(n=>{n.call(t,o)})}}}const T=[],C=[],k=[],z=[],A=Promise.resolve();let L=!1;function M(t){k.push(t)}function N(){const t=new Set;do{for(;T.length;){const t=T.shift();y(t),j(t.$$)}for(;C.length;)C.pop()();for(let n=0;n<k.length;n+=1){const e=k[n];t.has(e)||(e(),t.add(e))}k.length=0}while(T.length);for(;z.length;)z.pop()();L=!1}function j(t){null!==t.fragment&&(t.update(t.dirty),o(t.before_update),t.fragment&&t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_update.forEach(M))}const O=new Set;let S;function q(){S={r:0,c:[],p:S}}function I(){S.r||o(S.c),S=S.p}function B(t,n){t&&t.i&&(O.delete(t),t.i(n))}function F(t,n,e,c){if(t&&t.o){if(O.has(t))return;O.add(t),S.c.push(()=>{O.delete(t),c&&(e&&t.d(1),c())}),t.o(n)}}function G(t){t&&t.c()}function P(t,n,c){const{fragment:s,on_mount:l,on_destroy:u,after_update:a}=t.$$;s&&s.m(n,c),M(()=>{const n=l.map(e).filter(r);u?u.push(...n):o(n),t.$$.on_mount=[]}),a.forEach(M)}function R(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx={})}function D(t,n){t.$$.dirty||(T.push(t),L||(L=!0,A.then(N)),t.$$.dirty=c()),t.$$.dirty[n]=!0}function H(n,e,r,s,l,u){const a=x;y(n);const i=e.props||{},f=n.$$={fragment:null,ctx:null,props:u,update:t,not_equal:l,bound:c(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(a?a.$$.context:[]),callbacks:c(),dirty:null};let $=!1;f.ctx=r?r(n,i,(t,e,c=e)=>(f.ctx&&l(f.ctx[t],f.ctx[t]=c)&&(f.bound[t]&&f.bound[t](c),$&&D(n,t)),e)):i,f.update(),$=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),e.target&&(e.hydrate?f.fragment&&f.fragment.l(function(t){return Array.from(t.childNodes)}(e.target)):f.fragment&&f.fragment.c(),e.intro&&B(n.$$.fragment),P(n,e.target,e.anchor),N()),y(a)}class J{$destroy(){R(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}const K=[];function Q(n,e=t){let c;const o=[];function r(t){if(s(n,t)&&(n=t,c)){const t=!K.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),K.push(e,n)}if(t){for(let t=0;t<K.length;t+=2)K[t][0](K[t+1]);K.length=0}}}return{set:r,update:function(t){r(t(n))},subscribe:function(s,l=t){const u=[s,l];return o.push(u),1===o.length&&(c=e(r)||t),s(n),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(c(),c=null)}}}}const U=Q(!1),V=Q([]),W=Q(localStorage.getItem("tags")||"\nGR\n#ricohgr #grsnaps\n\nMINIMAL\n#minimal\n");W.subscribe(t=>{localStorage.setItem("tags",t)});const X=function(n,e,c){const s=!Array.isArray(n),l=s?[n]:n,u=e.length<2;return{subscribe:Q(c,n=>{let c=!1;const a=[];let i=0,f=t;const $=()=>{if(i)return;f();const c=e(s?a[0]:a,n);u?n(c):f=r(c)?c:t},d=l.map((t,n)=>t.subscribe(t=>{a[n]=t,i&=~(1<<n),c&&$()},()=>{i|=1<<n}));return c=!0,$(),function(){o(d),f()}}).subscribe}}(W,t=>t.replace(/#+/g," #").split(/[\n\t\s]+/g));function Y(t){let e,c;const o=t.$$slots.default,r=function(t,n,e){if(t){const c=u(t,n,e);return t[0](c)}}(o,t,null);return{c(){e=d("button"),r&&r.c(),h(e,"class","btn svelte-18r8jrh")},m(n,o){f(n,e,o),r&&r.m(e,null),t.button_binding(e),c=!0},p(t,e){r&&r.p&&t.$$scope&&r.p(function(t,e,c,o){return t[1]?n({},n(e.$$scope.changed||{},t[1](o?o(c):{}))):e.$$scope.changed||{}}(o,e,t,null),u(o,e,null))},i(t){c||(B(r,t),c=!0)},o(t){F(r,t),c=!1},d(n){n&&$(e),r&&r.d(n),t.button_binding(null)}}}function Z(t,n,e){const c=E();let o;w(()=>{const t=o.ontouchstart?"touchstart":"click",n=()=>c("tap");return o.addEventListener(t,n),()=>o.removeEventListener(t,n)});let{$$slots:r={},$$scope:s}=n;return t.$set=t=>{"$$scope"in t&&e("$$scope",s=t.$$scope)},{el:o,button_binding:function(t){C[t?"unshift":"push"](()=>{e("el",o=t)})},$$slots:r,$$scope:s}}class tt extends J{constructor(t){super(),H(this,t,Z,Y,s,{})}}function nt(n){let e;return{c(){h(e=d("textarea"),"class","svelte-15zzx8u")},m(t,c){f(t,e,c),n.textarea_binding(e)},p:t,i:t,o:t,d(t){t&&$(e),n.textarea_binding(null)}}}let et;function ct(t,n,e){return{textarea_binding:function(t){C[t?"unshift":"push"](()=>{e("clipboard",et=t)})}}}class ot extends J{constructor(t){super(),H(this,t,ct,nt,s,{})}}function rt(t){let n;const e=new tt({props:{$$slots:{default:[ut]},$$scope:{ctx:t}}});return e.$on("tap",t.tap_handler_1),{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},p(t,n){const c={};t.$$scope&&(c.$$scope={changed:t,ctx:n}),e.$set(c)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function st(t){let n;const e=new tt({props:{$$slots:{default:[at]},$$scope:{ctx:t}}});return e.$on("tap",t.tap_handler),{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},p(t,n){const c={};t.$$scope&&(c.$$scope={changed:t,ctx:n}),e.$set(c)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function lt(t){let n;const e=new tt({props:{$$slots:{default:[it]},$$scope:{ctx:t}}});return e.$on("tap",t.cancel),{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},p(t,n){const c={};t.$$scope&&(c.$$scope={changed:t,ctx:n}),e.$set(c)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function ut(t){let n;return{c(){n=p("Edit")},m(t,e){f(t,n,e)},d(t){t&&$(n)}}}function at(t){let n;return{c(){n=p("Save")},m(t,e){f(t,n,e)},d(t){t&&$(n)}}}function it(t){let n;return{c(){n=p("Cancel")},m(t,e){f(t,n,e)},d(t){t&&$(n)}}}function ft(t){let n;const e=new tt({props:{$$slots:{default:[$t]},$$scope:{ctx:t}}});return e.$on("tap",t.handleCopy),{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},p(t,n){const c={};(t.$$scope||t.selected)&&(c.$$scope={changed:t,ctx:n}),e.$set(c)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function $t(t){let n,e,c;return{c(){n=p("Copy ("),e=p(t.selected),c=p(")")},m(t,o){f(t,n,o),f(t,e,o),f(t,c,o)},p(t,n){t.selected&&b(e,n.selected)},d(t){t&&$(n),t&&$(e),t&&$(c)}}}function dt(t){let n,e,c,o,r,s,l,u;const a=[lt,st,rt],p=[];function m(t,n){return n.selected?0:n.$editing?1:2}c=m(0,t),o=p[c]=a[c](t);let b=t.selected&&ft(t);return{c(){n=d("header"),e=d("div"),o.c(),r=g(),(s=d("h1")).textContent="iTags",l=g(),b&&b.c(),h(e,"class","action svelte-1v73zsd"),h(s,"class","svelte-1v73zsd"),h(n,"class","svelte-1v73zsd")},m(t,o){f(t,n,o),i(n,e),p[c].m(e,null),i(n,r),i(n,s),i(n,l),b&&b.m(n,null),u=!0},p(t,r){let s=c;(c=m(0,r))===s?p[c].p(t,r):(q(),F(p[s],1,1,()=>{p[s]=null}),I(),(o=p[c])||(o=p[c]=a[c](r)).c(),B(o,1),o.m(e,null)),r.selected?b?(b.p(t,r),B(b,1)):((b=ft(r)).c(),B(b,1),b.m(n,null)):b&&(q(),F(b,1,1,()=>{b=null}),I())},i(t){u||(B(o),B(b),u=!0)},o(t){F(o),F(b),u=!1},d(t){t&&$(n),p[c].d(),b&&b.d()}}}function pt(t,n,e){let c,o;function r(){a(V,c=[])}l(t,V,t=>e("$selectedTags",c=t)),l(t,U,t=>e("$editing",o=t));let s;return t.$$.update=(t={$selectedTags:1})=>{t.$selectedTags&&e("selected",s=c.length)},{cancel:r,handleCopy:function(){var t;t=c.join(" "),et.value=t,et.select(),document.execCommand("copy"),r()},selected:s,$editing:o,tap_handler:()=>a(U,o=!1),tap_handler_1:()=>a(U,o=!0)}}class gt extends J{constructor(t){super(),H(this,t,pt,dt,s,{})}}function mt(n){let e,c;return{c(){var t,o,r,s;h(e=d("textarea"),"class","editor svelte-jrdo1d"),h(e,"spellcheck","false"),t=e,o="input",r=n.textarea_input_handler,t.addEventListener(o,r,s),c=()=>t.removeEventListener(o,r,s)},m(t,c){f(t,e,c),v(e,n.$rawTags)},p(t,n){t.$rawTags&&v(e,n.$rawTags)},i:t,o:t,d(t){t&&$(e),c()}}}function ht(t,n,e){let c;return l(t,W,t=>e("$rawTags",c=t)),{$rawTags:c,textarea_input_handler:function(){c=this.value,W.set(c)}}}class bt extends J{constructor(t){super(),H(this,t,ht,mt,s,{})}}function vt(n){let e,c;return{c(){e=d("em"),c=p(n.tag),h(e,"class","tag svelte-7801fv"),h(e,"style",n.style)},m(t,o){f(t,e,o),i(e,c),n.em_binding(e)},p(t,n){t.tag&&b(c,n.tag),t.style&&h(e,"style",n.style)},i:t,o:t,d(t){t&&$(e),n.em_binding(null)}}}function xt(){const{h:t,s:n,l:e}=(c=window.matchMedia("(prefers-color-scheme: dark)").matches,{h:360*Math.random(),s:20+50*Math.random(),l:(c?30:60)+10*Math.random()});var c;return`background-color: hsl(${t}, ${n}%, ${e}%)`}function yt(t,n,e){let c;l(t,V,t=>e("$selectedTags",c=t));let o,r,{tag:s}=n,u=!1;function i(){e("selected",u=!u),u?a(V,c=[...c,s]):(c.splice(c.indexOf(s),1),a(V,c=[...c]))}return V.subscribe(t=>{t.length||e("selected",u=!1)}),w(()=>{const t=o.ontouchstart?"touchstart":"click";return o.addEventListener(t,i),()=>o.removeEventListener(t,i)}),t.$set=t=>{"tag"in t&&e("tag",s=t.tag)},t.$$.update=(t={selected:1})=>{t.selected&&e("style",r=u?xt():"")},{tag:s,el:o,style:r,em_binding:function(t){C[t?"unshift":"push"](()=>{e("el",o=t)})}}}class _t extends J{constructor(t){super(),H(this,t,yt,vt,s,{tag:0})}}function wt(t,n,e){const c=Object.create(t);return c.tag=n[e],c}function Et(t){let n,e,c=t.$tags,o=[];for(let n=0;n<c.length;n+=1)o[n]=zt(wt(t,c,n));const r=t=>F(o[t],1,1,()=>{o[t]=null});return{c(){n=d("div");for(let t=0;t<o.length;t+=1)o[t].c();h(n,"class","tags svelte-b95bmq")},m(t,c){f(t,n,c);for(let t=0;t<o.length;t+=1)o[t].m(n,null);e=!0},p(t,e){if(t.$tags){let s;for(c=e.$tags,s=0;s<c.length;s+=1){const r=wt(e,c,s);o[s]?(o[s].p(t,r),B(o[s],1)):(o[s]=zt(r),o[s].c(),B(o[s],1),o[s].m(n,null))}for(q(),s=c.length;s<o.length;s+=1)r(s);I()}},i(t){if(!e){for(let t=0;t<c.length;t+=1)B(o[t]);e=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)F(o[t]);e=!1},d(t){t&&$(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(o,t)}}}function Tt(n){let e;return{c(){(e=d("div")).textContent="No Tags",h(e,"class","empty svelte-b95bmq")},m(t,n){f(t,e,n)},p:t,i:t,o:t,d(t){t&&$(e)}}}function Ct(n){let e,c,o=n.tag+"";return{c(){e=d("h3"),c=p(o),h(e,"class","title svelte-b95bmq")},m(t,n){f(t,e,n),i(e,c)},p(t,n){t.$tags&&o!==(o=n.tag+"")&&b(c,o)},i:t,o:t,d(t){t&&$(e)}}}function kt(t){let n;const e=new _t({props:{tag:t.tag}});return{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},p(t,n){const c={};t.$tags&&(c.tag=n.tag),e.$set(c)},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function zt(t){let n,e,c,o,r;const s=[kt,Ct],l=[];function u(t,e){return(null==n||t.$tags)&&(n=!!e.tag.match(/^#/)),n?0:1}return e=u(null,t),c=l[e]=s[e](t),{c(){c.c(),o=m()},m(t,n){l[e].m(t,n),f(t,o,n),r=!0},p(t,n){let r=e;(e=u(t,n))===r?l[e].p(t,n):(q(),F(l[r],1,1,()=>{l[r]=null}),I(),(c=l[e])||(c=l[e]=s[e](n)).c(),B(c,1),c.m(o.parentNode,o))},i(t){r||(B(c),r=!0)},o(t){F(c),r=!1},d(t){l[e].d(t),t&&$(o)}}}function At(t){let n,e,c,o;const r=[Tt,Et],s=[];function l(t,n){return n.empty?0:1}return n=l(0,t),e=s[n]=r[n](t),{c(){e.c(),c=m()},m(t,e){s[n].m(t,e),f(t,c,e),o=!0},p(t,o){let u=n;(n=l(0,o))===u?s[n].p(t,o):(q(),F(s[u],1,1,()=>{s[u]=null}),I(),(e=s[n])||(e=s[n]=r[n](o)).c(),B(e,1),e.m(c.parentNode,c))},i(t){o||(B(e),o=!0)},o(t){F(e),o=!1},d(t){s[n].d(t),t&&$(c)}}}function Lt(t,n,e){let c,o;return l(t,X,t=>e("$tags",c=t)),t.$$.update=(t={$tags:1})=>{t.$tags&&e("empty",o=!c.length)},{empty:o,$tags:c}}class Mt extends J{constructor(t){super(),H(this,t,Lt,At,s,{})}}function Nt(t){let n;const e=new Mt({});return{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function jt(t){let n;const e=new bt({});return{c(){G(e.$$.fragment)},m(t,c){P(e,t,c),n=!0},i(t){n||(B(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Ot(t){let n,e,c,o,r,s,l;const u=new gt({}),a=[jt,Nt],p=[];function m(t,n){return n.$editing?0:1}o=m(0,t),r=p[o]=a[o](t);const b=new ot({});return{c(){n=d("main"),G(u.$$.fragment),e=g(),c=d("div"),r.c(),s=g(),G(b.$$.fragment),h(c,"class","view svelte-z0d15v"),h(n,"class","app svelte-z0d15v")},m(t,r){f(t,n,r),P(u,n,null),i(n,e),i(n,c),p[o].m(c,null),f(t,s,r),P(b,t,r),l=!0},p(t,n){let e=o;(o=m(0,n))!==e&&(q(),F(p[e],1,1,()=>{p[e]=null}),I(),(r=p[o])||(r=p[o]=a[o](n)).c(),B(r,1),r.m(c,null))},i(t){l||(B(u.$$.fragment,t),B(r),B(b.$$.fragment,t),l=!0)},o(t){F(u.$$.fragment,t),F(r),F(b.$$.fragment,t),l=!1},d(t){t&&$(n),R(u),p[o].d(),t&&$(s),R(b,t)}}}function St(t,n,e){let c;return l(t,U,t=>e("$editing",c=t)),{$editing:c}}return new class extends J{constructor(t){super(),H(this,t,St,Ot,s,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
